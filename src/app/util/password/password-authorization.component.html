<p-dialog
  [(visible)]="isVisible"
  (onHide)="closeDialog()"
  [modal]="true"
  [draggable]="false"
  [resizable]="false"
  [style]="{ width: 'fit-content' }"
>
  <ng-template #header>
    <div class="inline-flex items-center justify-center gap-2">
      <span class="font-bold whitespace-nowrap text-lg">{{ title() | translate }}</span>
    </div>
  </ng-template>

  <form (ngSubmit)="onSubmit()" [formGroup]="form" class="flex gap-3">
    <div class="flex flex-col gap-2 w-fit">
      <p-iconfield [dt]="myIcon('{primary.400}')">
        <input
          [dt]="myInput(false)"
          class="w-full"
          formControlName="password"
          id="password"
          pInputText
          placeholder="{{ 'form.label.password' | translate}} "
          title="Password"
          type="{{showPassword() ? 'text' : 'password'}}">
        <p-inputicon (click)="togglePassword()" styleClass="{{showPassword() ? 'pi pi-eye-slash' : 'pi pi-eye'}}"
                     title="Toggle Password Visibility"/>
      </p-iconfield>

      @if (!form.controls.password.untouched && !form.controls.password.valid) {
        <span title="Invalid Password" id="password-help" class="invalid-text">
          {{ "form.invalid.password.requiered" | translate }}
        </span>
      }
    </div>

    <p-button
      label="{{ action() | translate }}"
      severity="primary"
      type="submit"
    />
  </form>

  @if (guestAction()) {
    <ng-template #footer>
      <p-button
        size="small"
        label='{{ "component.user.admin.authorize.guest" | translate }}'
        severity="primary"
        type="button"
        (click)="authorizeAsGuest()"
      />
    </ng-template>
  }
</p-dialog>
