<div class="layout">

  @if (query.status() !== "error") {
    <div class="products-search">
      <app-products-search (onSearch)="this.filterService.setSearchText($event)"/>
      <app-products-filter [items]="getAllBeverageFilters()"/>
    </div>
  }

  <div class="container">

    <ul title="Beverage List" class="products flex flex-wrap justify-start gap-y-8 gap-x-8">
      @if (query.status() === "error") {
        <app-server-error/>
      }

      @if (query.status() === "pending") {
        <ng-container *ngFor="let _ of [].constructor(skeletonCount)">
          <p-skeleton width="15rem" height="20rem"/>
        </ng-container>
      }

      @if (query.status() === "success") {
        @for (product of query.data()!.payload.productList | productsSearch: this.filterService.searchText:filters(); track product.id) {
          <li>
            <app-product [product]="product"/>
          </li>
        }
      }
    </ul>

    <div class="paginator">
      <p-paginator
        title="Paginator"
        (onPageChange)="onPageChange($event)"
        [first]="first"
        [rows]="maxItems"
        [totalRecords]="totalElements"
        [rowsPerPageOptions]="pageSizeOptions"/>
    </div>

  </div>
</div>
